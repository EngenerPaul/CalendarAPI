{% extends 'lessons_app/management/management_base.html' %}
{% load static %}
{% load i18n %}

{% block menu %}

<h3>{% translate "Time blocker" %}</h3>
<div class="row">
    <div class="col-4" style="min-width: 300px;max-width: 400px; margin-right: 70px;">
        <form method="post">
            {% csrf_token %}
            {{form.as_p}}
            <button type='submit' class='btn btn-primary btn-block'>{% translate "Block" %}</button>
        </form>
    </div>
    <div class="col" style="max-width: 700px;">
        <div class="container testimonial-group" style="margin-top: -50px;">
            <div class="row text-center">
                <div class="row flex-nowrap">
                    <div class="table" style="max-width: 900px;">
                        {% if blocked_time %}
                            <table class="table table-striped">
                                <thead class="thead-light">
                                    <tr>
                                        <th style="width: 30%; text-align: center; min-width: 130px; vertical-align: middle" ><h5>{% translate "Date" %}</h5></th>
                                        <th style="width: 30%; text-align: center; min-width: 100px; white-space: normal;" ><h5>{% translate "Start time" %}</h5></th>
                                        <th style="width: 30%; text-align: center; min-width: 100px; white-space: normal;" ><h5>{% translate "End time" %}</h5></th>
                                        <th style="width: 10%; min-width: 100px;" ></th>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for date, times in blocked_time.items %}
                                        {% for time in times %}
                                        <tr>
                                            <th style="vertical-align: middle; text-align: center;">
                                                {{ date|date:"j b, D" }}
                                            </th>
                                            <th style="vertical-align: middle; text-align: center;">
                                                {{ time.0 }}
                                            </th>
                                            <th style="vertical-align: middle; text-align: center;">
                                                {{ time.1 }}
                                            </th>
                                            <th style="vertical-align: middle; text-align: center;">
                                                <form method="post">
                                                    {% csrf_token %}
                                                    <button type='submit' class='btn btn-danger btn-block' name="block" value="{{ date|date:'d-m-y' }}_{{ time.0 }}" style="padding: 6px 12px 6px 6px; width: 100%; width: 50px; padding: 6px 0px;">
                                                        <img src="{% static 'img/white-cross.png' %}" alt="delete" width="20px">
                                                    </button>
                                                </form>
                                            </th>
                                        </tr>
                                        {% endfor %}
                                    {% endfor %}
                                </tbody>
                            </table>
                        {% else %}
                            <p style="font-size: 14pt; color: rgb(168, 168, 168);">
                                {% translate "Blocks don't exist" %}
                            </p>
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

{% endblock menu %}
